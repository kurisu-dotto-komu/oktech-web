---
import PageLayout from "../layouts/PageLayout.astro";
import Link from "../components/Link.astro";
import { getEvents, POSSIBLE_ROLES } from "../data";

const events = await getEvents();

const staticPages = [
  { label: "Home", href: "/" },
  { label: "About", href: "/about" },
  { label: "Events", href: "/events" },
  { label: "Community", href: "/community" },
];

const communityPages = POSSIBLE_ROLES.map((role) => ({
  label: `Community – ${role.charAt(0).toUpperCase() + role.slice(1)}`,
  href: `/community/${role}`,
}));

const eventPages = events.map(({ id, data }) => ({
  label: `Event – ${data.title}`,
  href: `/event/${id}`,
}));

const allPages = [...staticPages, ...communityPages, ...eventPages];
---

<PageLayout title="Sitemap">
  <div class="container mx-auto px-4 py-8 prose">
    <h1>Sitemap</h1>
    <p>This page lists every accessible route on the website for easy navigation.</p>
    <ul>
      {allPages.map((page) => (
        <li><Link href={page.href}>{page.label}</Link></li>
      ))}
    </ul>
  </div>
</PageLayout>